"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[332],{9332:(_,p,s)=>{s.r(p),s.d(p,{EmpresasComponent:()=>u});var i=s(95),l=s(627),c=s(8645),e=s(9468),m=s(1492),g=s(870);let u=(()=>{class d{constructor(n,t){this.notify=n,this.api=t,this.dtOptions={},this.dtTrigger=new c.x,this.company={id:0,name:"",type:"",info:""},this.message="",this.data=[],this.data1=[]}someClickHandler(n){this.message=n.id+" - "+n.name}ngAfterViewInit(){this.dtTrigger.next(this.dtOptions)}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){let n=this;this.dtElement.dtInstance.then(t=>{t.destroy(),n.dtOptions.data=this.data,this.dtTrigger.next(n.dtOptions),console.log(n.dtOptions)}),console.log(this.data)}ngOnInit(){this.dtOptions={data:this.data,columns:[{title:"ID",data:"id"},{title:"Nombre",data:"name"},{title:"Tipo",data:"type"},{title:"Informaci\xf3n",data:"info"}],rowCallback:(n,t,o)=>{const a=this;return $("td",n).off("click"),$("td",n).on("click",()=>{a.someClickHandler(t)}),n}},this.add()}crear(){let n=this;""==this.company.name||""==this.company.type?this.notify.notifyError("Complete los datos"):(console.log(this.company),this.api.createcompany(this.company).subscribe({next(t){console.log(t),n.notify.notifySuccess("Empresa creada con \xe9xito!"),n.reset()},error(t){console.log(t),n.notify.notifyError(t.error)}}))}reset(){this.company.id=0,this.company.info="",this.company.name="",this.company.type="",this.add()}add(){this.data=[];let n=this;this.api.getcompany().subscribe({next(t){t.reverse(),console.log(t),n.data=t,n.rerender()},error(t){console.log(t),n.notify.notifyError(t.error)}})}static#e=this.\u0275fac=function(t){return new(t||d)(e.Y36(m.s),e.Y36(g.s))};static#t=this.\u0275cmp=e.Xpm({type:d,selectors:[["app-empresas"]],viewQuery:function(t,o){if(1&t&&e.Gf(l.G,5),2&t){let a;e.iGM(a=e.CRH())&&(o.dtElement=a.first)}},standalone:!0,features:[e.jDz],decls:44,vars:6,consts:[[1,"row"],[1,"row","justify-content-center"],[1,"col-xl-6","col-md-6"],[1,"card"],[1,"card-body"],[1,"text-danger"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"auth-header"],[1,"text-secondary","mt-5"],[1,"fs-4","mt-2"],[1,"form-floating","mb-3"],["type","text","id","Empresa","value","Empresa ...",1,"form-control",3,"ngModel","ngModelChange"],["for","Empresa"],["name","cars","id","type",1,"form-control",3,"ngModel","ngModelChange"],["value","CentroComercial"],["value","Hotel"],["value","Restaurant"],["value","Industria"],["for","info"],["type","text","id","info","value","Info ...",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",0)(6,"p",5),e._uU(7,"Has seleccionado: "),e.TgZ(8,"strong"),e._uU(9),e.qZA()(),e._UZ(10,"table",6),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",3)(13,"div",4)(14,"div",0)(15,"div",7)(16,"h2",8)(17,"b"),e._uU(18,"Crear empresas"),e.qZA()(),e.TgZ(19,"p",9),e._uU(20,"Ingresa los datos"),e.qZA()(),e.TgZ(21,"div",10)(22,"input",11),e.NdJ("ngModelChange",function(r){return o.company.name=r}),e.qZA(),e.TgZ(23,"label",12),e._uU(24,"Nombre"),e.qZA()(),e.TgZ(25,"div",10)(26,"select",13),e.NdJ("ngModelChange",function(r){return o.company.type=r}),e.TgZ(27,"option",14),e._uU(28,"Centro comercial"),e.qZA(),e.TgZ(29,"option",15),e._uU(30,"Hotel"),e.qZA(),e.TgZ(31,"option",16),e._uU(32,"Restaurant"),e.qZA(),e.TgZ(33,"option",17),e._uU(34,"Industria"),e.qZA()(),e.TgZ(35,"label",18),e._uU(36,"Tipo de empresa"),e.qZA()(),e.TgZ(37,"div",10)(38,"input",19),e.NdJ("ngModelChange",function(r){return o.company.info=r}),e.qZA(),e.TgZ(39,"label",18),e._uU(40,"Informaci\xf3n"),e.qZA()(),e.TgZ(41,"div",20)(42,"button",21),e.NdJ("click",function(){return o.crear()}),e._uU(43,"Crear empresa"),e.qZA()()()()()()()()),2&t&&(e.xp6(9),e.Oqu(o.message),e.xp6(1),e.Q6J("dtOptions",o.dtOptions)("dtTrigger",o.dtTrigger),e.xp6(12),e.Q6J("ngModel",o.company.name),e.xp6(4),e.Q6J("ngModel",o.company.type),e.xp6(12),e.Q6J("ngModel",o.company.info))},dependencies:[l.T,l.G,i.u5,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.On]})}return d})()}}]);