"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[372],{1372:(h,p,n)=>{n.r(p),n.d(p,{PedidosComponent:()=>u});var g=n(6814),a=n(95),l=n(627),_=n(8645),e=n(9468),m=n(1492),c=n(870);let u=(()=>{class r{constructor(i,t){this.notify=i,this.api=t,this.dtOptions={},this.dtTrigger=new _.x,this.pedido={id:0,info:"",company_id:"",company_name:"",user_id:"",user_name:""},this.message="",this.data=[],this.data1=[]}someClickHandler(i){this.message=i.id+" - "+i.name,this.pedido=i}ngAfterViewInit(){this.dtTrigger.next(this.dtOptions)}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){let i=this;this.dtElement.dtInstance.then(t=>{t.destroy(),i.dtOptions.data=this.data,this.dtTrigger.next(i.dtOptions),console.log(i.dtOptions)}),console.log(this.data)}ngOnInit(){this.dtOptions={data:this.data,columns:[{title:"ID",data:"id"},{title:"Informaci\xf3n",data:"info"},{title:"Empresa",data:"company_name"},{title:"Usuario",data:"user_name"}],rowCallback:(t,o,s)=>{const d=this;return $("td",t).off("click"),$("td",t).on("click",()=>{d.someClickHandler(o)}),t}};let i=this;this.api.getpedidos().subscribe({next(t){t.reverse(),console.log(t),i.data=t,i.rerender()},error(t){console.log(t),i.notify.notifyError(t.error)}})}crear(){let i=this;""==this.pedido.info?this.notify.notifyError("Complete los datos"):(console.log(this.pedido),this.api.createpedidos(this.pedido).subscribe({next(t){console.log(t),i.notify.notifySuccess("Pedido creado con \xe9xito!"),i.reset()},error(t){console.log(t),i.notify.notifyError(t.error)}}))}reset(){this.pedido.id=0,this.pedido.info="",this.pedido.company_id="",this.pedido.user_id="",this.add()}add(){this.data=[]}static#e=this.\u0275fac=function(t){return new(t||r)(e.Y36(m.s),e.Y36(c.s))};static#t=this.\u0275cmp=e.Xpm({type:r,selectors:[["app-pedidos"]],viewQuery:function(t,o){if(1&t&&e.Gf(l.G,5),2&t){let s;e.iGM(s=e.CRH())&&(o.dtElement=s.first)}},standalone:!0,features:[e.jDz],decls:34,vars:6,consts:[[1,"row"],[1,"row","justify-content-center"],[1,"col-xl-6","col-md-6"],[1,"card"],[1,"card-body"],[1,"text-danger"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"auth-header"],[1,"text-secondary","mt-5"],[1,"fs-4","mt-2"],[1,"form-floating","mb-3"],["type","text","id","Empresa","value","Empresa ...",1,"form-control",3,"ngModel","ngModelChange"],["for","Empresa"],["type","text","id","info","value","Info ...",1,"form-control",3,"ngModel","ngModelChange"],["for","info"],[1,"d-grid","mt-4"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",0)(6,"p",5),e._uU(7,"Has seleccionado: "),e.TgZ(8,"strong"),e._uU(9),e.qZA()(),e._UZ(10,"table",6),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",3)(13,"div",4)(14,"div",0)(15,"div",7)(16,"h2",8)(17,"b"),e._uU(18,"Informacion del pedido"),e.qZA()(),e.TgZ(19,"p",9),e._uU(20,"Resumen del pedido"),e.qZA()(),e.TgZ(21,"div",10)(22,"input",11),e.NdJ("ngModelChange",function(d){return o.pedido.info=d}),e.qZA(),e.TgZ(23,"label",12),e._uU(24,"Nombre"),e.qZA()(),e.TgZ(25,"div",10)(26,"input",13),e.NdJ("ngModelChange",function(d){return o.pedido.company_name=d}),e.qZA(),e.TgZ(27,"label",14),e._uU(28,"Empresa"),e.qZA()(),e.TgZ(29,"div",10)(30,"input",13),e.NdJ("ngModelChange",function(d){return o.pedido.user_name=d}),e.qZA(),e.TgZ(31,"label",14),e._uU(32,"Usuario"),e.qZA()(),e._UZ(33,"div",15),e.qZA()()()()()()),2&t&&(e.xp6(9),e.Oqu(o.message),e.xp6(1),e.Q6J("dtOptions",o.dtOptions)("dtTrigger",o.dtTrigger),e.xp6(12),e.Q6J("ngModel",o.pedido.info),e.xp6(4),e.Q6J("ngModel",o.pedido.company_name),e.xp6(4),e.Q6J("ngModel",o.pedido.user_name))},dependencies:[l.T,l.G,a.u5,a.Fj,a.JJ,a.On,g.ez]})}return r})()}}]);