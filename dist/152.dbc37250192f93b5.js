"use strict";(self.webpackChunkfree_version=self.webpackChunkfree_version||[]).push([[152],{8152:(T,d,i)=>{i.r(d),i.d(d,{LegajosComponent:()=>C});var _=i(6814),l=i(95),g=i(627),p=i(8645),e=i(9468),c=i(1492),u=i(870);function m(n,r){if(1&n&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function f(n,r){if(1&n&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function h(n,r){if(1&n&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}let C=(()=>{class n{constructor(t,o){this.notify=t,this.api=o,this.dtOptions={},this.dtTrigger=new p.x,this.legajo={info:"",company_id:"",role_id:"",user_id:""},this.message="",this.data=[],this.empresas=[],this.roles=[],this.users=[]}someClickHandler(t){this.message=t.id+" - "+t.name}ngAfterViewInit(){this.dtTrigger.next(this.dtOptions)}ngOnDestroy(){this.dtTrigger.unsubscribe()}rerender(){let t=this;this.dtElement.dtInstance.then(o=>{o.destroy(),t.dtOptions.data=this.data,this.dtTrigger.next(t.dtOptions),console.log(t.dtOptions)}),console.log(this.data)}ngOnInit(){this.dtOptions={data:this.data,columns:[{title:"ID",data:"id"},{title:"Informaci\xf3n",data:"info"},{title:"Empresa",data:"company_name"},{title:"Role",data:"roles_name"},{title:"Usuario",data:"user_name"}],rowCallback:(o,s,a)=>{const j=this;return $("td",o).off("click"),$("td",o).on("click",()=>{j.someClickHandler(s)}),o}},this.add();let t=this;this.api.getcompany().subscribe({next(o){console.log(o),t.empresas=o},error(o){console.log(o),t.notify.notifyError(o.error)}}),this.api.getroles().subscribe({next(o){console.log(o),t.roles=o},error(o){console.log(o),t.notify.notifyError(o.error)}}),this.api.getusers().subscribe({next(o){console.log(o),t.users=o},error(o){console.log(o),t.notify.notifyError(o.error)}})}crear(){if(""==this.legajo.info||""==this.legajo.company_id||""==this.legajo.role_id||""==this.legajo.user_id)this.notify.notifyError("Complete los datos");else{console.log(this.legajo);let o=this;this.api.createlegajos(this.legajo).subscribe({next(s){console.log(s),o.notify.notifySuccess("Usuario creado con \xe9xito"),o.reset()},error(s){console.log(s),o.notify.notifyError(s.error)}})}}reset(){this.legajo.info="",this.legajo.company_id="",this.legajo.role_id="",this.legajo.user_id="",this.add()}add(){this.data=[];let t=this;this.api.getlegajos().subscribe({next(o){console.log(o),t.data=o,t.rerender()},error(o){console.log(o),t.notify.notifyError(o.error)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.s),e.Y36(u.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-legajos"]],viewQuery:function(t,o){if(1&t&&e.Gf(g.G,5),2&t){let s;e.iGM(s=e.CRH())&&(o.dtElement=s.first)}},standalone:!0,features:[e.jDz],decls:43,vars:10,consts:[[1,"row"],[1,"row","justify-content-center"],[1,"col-xl-6","col-md-6"],[1,"card"],[1,"card-body"],[1,"text-danger"],["datatable","",1,"row-border","hover",3,"dtOptions","dtTrigger"],[1,"auth-header"],[1,"text-secondary","mt-5"],[1,"fs-4","mt-2"],[1,"form-floating","mb-3"],["type","text","id","Empresa","value","Empresa ...",1,"form-control",3,"ngModel","ngModelChange"],["for","Empresa"],["name","empresas","id","empresas",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["for","info"],["name","roles","id","roles",1,"form-control",3,"ngModel","ngModelChange"],["name","users","id","users",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-grid","mt-4"],["type","button",1,"btn","btn-secondary",3,"click"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",0)(6,"p",5),e._uU(7,"Has seleccionado: "),e.TgZ(8,"strong"),e._uU(9),e.qZA()(),e._UZ(10,"table",6),e.qZA()()()(),e.TgZ(11,"div",2)(12,"div",3)(13,"div",4)(14,"div",0)(15,"div",7)(16,"h2",8)(17,"b"),e._uU(18,"Crear Legajos"),e.qZA()(),e.TgZ(19,"p",9),e._uU(20,"Ingresa los datos"),e.qZA()(),e.TgZ(21,"div",10)(22,"input",11),e.NdJ("ngModelChange",function(a){return o.legajo.info=a}),e.qZA(),e.TgZ(23,"label",12),e._uU(24,"Nombre"),e.qZA()(),e.TgZ(25,"div",10)(26,"select",13),e.NdJ("ngModelChange",function(a){return o.legajo.company_id=a}),e.YNc(27,m,2,2,"option",14),e.qZA(),e.TgZ(28,"label",15),e._uU(29,"Empresa"),e.qZA()(),e.TgZ(30,"div",10)(31,"select",16),e.NdJ("ngModelChange",function(a){return o.legajo.role_id=a}),e.YNc(32,f,2,2,"option",14),e.qZA(),e.TgZ(33,"label",15),e._uU(34,"Role de usuario"),e.qZA()(),e.TgZ(35,"div",10)(36,"select",17),e.NdJ("ngModelChange",function(a){return o.legajo.user_id=a}),e.YNc(37,h,2,2,"option",14),e.qZA(),e.TgZ(38,"label",15),e._uU(39,"Usuario"),e.qZA()(),e.TgZ(40,"div",18)(41,"button",19),e.NdJ("click",function(){return o.crear()}),e._uU(42,"Crear empresa"),e.qZA()()()()()()()()),2&t&&(e.xp6(9),e.Oqu(o.message),e.xp6(1),e.Q6J("dtOptions",o.dtOptions)("dtTrigger",o.dtTrigger),e.xp6(12),e.Q6J("ngModel",o.legajo.info),e.xp6(4),e.Q6J("ngModel",o.legajo.company_id),e.xp6(1),e.Q6J("ngForOf",o.empresas),e.xp6(4),e.Q6J("ngModel",o.legajo.role_id),e.xp6(1),e.Q6J("ngForOf",o.roles),e.xp6(4),e.Q6J("ngModel",o.legajo.user_id),e.xp6(1),e.Q6J("ngForOf",o.users))},dependencies:[g.T,g.G,l.u5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,_.ez,_.sg]}),n})()}}]);